{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["/*Призначення: Виконання HTTP-запитів до API Pixabay і повернення даних.\n\nФункції:\ngetImagesByQuery(query):\n  1.Формує параметри запиту (пошуковий запит, ключ API, кількість результатів тощо).\n  2.Використовує axios для виконання запиту.\n  3.Повертає дані (об'єкт із масивом зображень hits)\n  4.Передає помилки, якщо запит не вдався.\n\n        Зв'язок із main.js:\n  1.Імпортується в main.js.\n  2.Викликається при кожному пошуку для отримання даних.*/\n\n// Імпортую бібліотеку для HTTP-запитів\nimport axios from 'axios';\n\n//Створюю константи для роботи з API Pixabay\nconst API_KEY = '50290691-d51719558e36c91c48babc26d'; // Мій унікальний  API-ключ сервісу Pexibay\n\nconst BASE_URL = 'https://pixabay.com/api/'; // Базова URL-адреса для запитів\n\nconst PER_PAGE = 15;\n\n// Функція для отримання зображень за пошуковим запитом\nexport async function getImagesByQuery(query) {\n  // перевірка отриманого параметра функції\n  // console.log('Виклик функції getImagesByQuery із запитом:', query);\n\n  /*Створюю змінну де кладу параметри запиту, які будуть передані у URL.Використовуючи цю змінну, я передаю параметри у функцію axios.get, яка додає їх до запиту в форматі URL-параметрів (query string).*/\n  const params = {\n    key: API_KEY, // Мій ключ для автентифікації\n    q: query, // Пошукове слово, що користувач ввів в пошукове поле\n    image_type: 'photo', // фільтрую лише зображення\n    orientation: 'horizontal', // Орієнтація зображень-горізогтальна\n    safesearch: true, // Фільтр для безпечного пошуку\n    per_page: PER_PAGE, // Максимальна кількість результатів за запитом\n    page: 1,\n  };\n\n\n  \n  \n  \n\n  //  перевіряю параметри запитуу створеному об'єкті\n  // console.log('Параметри запиту сформовані:', params);\n\n  /*Виконуємо GET-запит.Ця функція повертає Promise, який вирішується в об'єкт із даними від API\nЦей рядок виконує HTTP-запит за допомогою бібліотеки axios. Він повертає проміс, який буде вирішений після завершення запиту.*/\n  //   return (\n  //     axios\n  //       .get(BASE_URL, { params }) // GET-запит на сервер з базовою URL і параметрами\n\n  //       //Успішний результат (об'єкт відповіді) обробляється в цьому блоці. Використовується стрілкова функція, щоб повернути лише дані відповіді (response.data).\n  //       .then(response => response.data)\n\n  //       //У разі помилки в процесі запиту вона передається далі за допомогою throw error;. Це дозволяє обробити помилку в обробнику catch() у місці виклику цієї функції.\n  //       .catch(error => {\n  //         throw error;\n  //       })\n  //   );\n  // }\n  //тут я прописую обробку помилки яка може виникнути під час запиту.Відбувається виклик axios.get  \n  try {\n    // Виконую GET-запит до API з використанням axios\n    const response = await axios.get(BASE_URL, { params });\n    // Повертаю дані (масив зображень hits)\n    return response.data;\n  } catch (error) {\n    // Якщо сталася помилка, викидаю її для обробки на рівні виклику функції\n    throw error;\n  }\n}","/*Призначення:\nВідповідає за створення, оновлення та очищення галереї зображень, а також за інтеграцію лайтбоксу (SimpleLightbox).\n\nФункції:\n1.createGallery(images):\n  -Приймає масив об'єктів із зображеннями (дані від API).\n  -Створює HTML-розмітку для галереї.\n  -Додає цю розмітку до контейнера .gallery.\n  -Ініціалізує або оновлює SimpleLightbox для роботи з галереєю.\n2.clearGallery():\n -Очищає контейнер галереї.\n3.showLoader():\n-Додає клас loading до тега <body>, активуючи стилі лоадера (визначені в CSS).\n4.hideLoader():\n  -Видаляє клас loading із тега <body>.*/\n\n// Імпортую бібліотеку для лайтбоксу\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// Знаходжу контейнер для галереї\nconst galleryContainer = document.querySelector('.gallery'); // Вибираю елемент галереї за класом \"gallery\"\n// знаходжу кнопку для пролістування галереі\nconst loadMoreButton = document.querySelector('.select');\n\nconst loader = document.querySelector('.loader');\n\n// перевірка елемента галереї\n// console.log('Контейнер галереї знайдено:', galleryContainer);\n\nlet lightbox = null; // Змінна для екземпляра SimpleLightbox\n// console.log('Ініціалізовано змінну для SimpleLightbox:', lightbox); // перевіряю початкового значення змінної\n\n// Функція для створення галереї з масиву зображень\nexport function createGallery(images) {\n  // Перевіряю отриманий масив зображень\n  console.log('Виклик createGallery. Масив зображень:', images);\n\n  try {\n    // Генерую HTML-розмітку для кожного елемента з масиву зображень\n    const markup = images\n      .map(\n        ({\n          webformatURL, // URL для відображення маленького зображення\n          largeImageURL, // URL для великого зображення\n          tags, // Опис зображення\n          likes, // Кількість лайків\n          views, // Кількість переглядів\n          comments, // Кількість коментарів\n          downloads, // Кількість завантажень\n        }) => {\n          //Виводжу  дані, які обробляються.\n          console.log('Обробка зображення:', {\n            webformatURL,\n            largeImageURL,\n            tags,\n          });\n          return `\n        <li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          </a>\n        <div class=\"info\">\n        <p><b>Likes:</b> ${likes}</p>\n        <p><b>Views:</b> ${views}</p>\n        <p><b>Comments:</b> ${comments}</p>\n        <p><b>Downloads:</b> ${downloads}</p>\n      </div>\n    </li>`;\n        }\n      )\n\n      //Метод .join('') перетворює масив рядків, отриманих після виконання .map(), в єдиний рядок.\n      .join('');\n\n    // Додаю згенеровану розмітку в контейнер галереї\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n\n    // Перевіряю чи вже існує екземпляр SimpleLightbox\n    if (lightbox) {\n      lightbox.refresh(); // Якщо так,оновлюю існуючий екземпляр лайтбоксу для нових елементів\n    } else {\n      //створюю новий екземпляр SimpleLightbox\n      lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt', // Використовую атрибут \"alt\" для підписів зображення\n        captionDelay: 250, // Затримка перед показом підпису\n      });\n\n      //перевіряю створення\n      // console.log('Створено новий екземпляр SimpleLightbox:', lightbox);\n\n      // Показуємо кнопку після додавання зображень\n    }\n    // Показати кнопку \"Load more\" якщо є зображення\n    if (galleryContainer.children.length > 0) {\n      loadMoreButton.classList.remove('is-hidden');\n    }\n   \n  } catch (error) {\n    console.error('Помилка у createGallery:', error);\n    throw error;\n  }\n}\n// Функція для очищення галереї\nexport async function clearGallery() {\n  try {\n    galleryContainer.innerHTML = ''; // видаляю весь HTML-контент с контейнера галереї\n    // Сховати кнопку під час нового пошуку\n    hideLoadMoreButton();\n\n    console.log('Галерея очищена.');\n  } catch (error) {\n    // Обробка помилок під час очищення\n    console.error('Помилка у функції clearGallery:', error);\n    throw new Error('Не вдалося очистити галерею.');\n  }\n}\n\n// Функція для відображення\n\nexport async function showLoader() {\n  // console.log('Виклик функції showLoader.'); //  виклику функції\n  try {\n    // document.body.classList.add('loading'); // присвоюю тегу <body>  клас \"loading\" який вмикає анимацію через\n    loader.style.display = 'block';\n\n    console.log('Клас \"loading\" додано до тега <body>.'); // підтвердження додавання класу після невірного вводу\n  } catch (error) {\n    // Обробка помилок під час відображення лоадера\n    console.error('Помилка у функції showLoader:', error);\n    throw new Error('Не вдалося показати лоадер.');\n  }\n}\n\n// Функція для приховування\nexport async function hideLoader() {\n  // console.log('Виклик функції hideLoader.'); //  виклик\n  try {\n    //  document.body.classList.remove('loading');  // Видаляю клас \"loading\" з <body>, щоб приховати стилі лоадера\n    loader.style.display = 'none';\n    // console.log('Клас \"loading\" видалено з тега <body>.'); //  підтвердження видалення класу\n  } catch (error) {\n    // Обробка помилок під час приховування лоадера\n    console.error('Помилка у функції hideLoader:', error);\n    throw new Error('Не вдалося приховати лоадер.');\n  }\n}\n// Показати кнопку\nexport async function showLoadMoreButton() {\n  try {\n    loadMoreButton.classList.remove('is-hidden');\n  } catch (error) {\n    console.error('Помилка при показі кнопки Load more:', error);\n    throw error;\n  }\n}\n// Приховати кнопку\nexport async function hideLoadMoreButton() {\n  try {\n    loadMoreButton.classList.add('is-hidden');\n  } catch (error) {\n    console.error('Помилка при приховуванні кнопки Load more:', error);\n    throw error;\n  }\n}\n","/*Призначення: Основна логіка програми, яка пов'язує всі частини разом.\n\nФункція та дії:\n 1.функція getImagesByQuery(query) для отримання даних із API Pixabay (імпортована з pixabay-api.js)\n  -Викликає функції з render-functions.js :\n  -clearGallery(): Очищає галерею перед новим пошуком.\n  -createGallery(images): Відображає нові зображення на сторінці.\n  -showLoader() та hideLoader(): Керує відображенням лоадера під час виконання запитів.\n  -Обробляє події введення користувачем тексту у форму пошуку.*/\n\n/* Імпортую функції з інших файлів для роботи із запитами та створення і показу галереі.Цей імпорт дозволяє використовувати функцію для запитів до API Pixabay*/\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery } from './js/render-functions.js';\n\n// Імпортую бібліотеку для повідомлення\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Знаходжу елементи форми та поля вводу\nconst form = document.querySelector('.form'); // елемент форми за класом \"form\"\nconst input = form.querySelector('input[name=\"search-text\"]'); //поле вводу тексту за ім'ям \"search-text\"\nconst loader = document.querySelector('.loader');\n\n/* Чекаю завантаження DOM\nЦя подія гарантує, що весь HTML завантажено перед виконанням скриптів*/\ndocument.addEventListener('DOMContentLoaded', () => {\n  // При завантаженні сторінки приховую лоадер, щоб він не був видимий.\n\n\n  // // перевіряю\n  // console.log('Лоадер приховано');\n});\n\n/* Функція для показу.Вона установлює властивість елементу loader, тоді він становиться видимим на сторінці */\nfunction showLoader() {\n  try {\n    if (loader)\n      loader.style.display = 'block'; // Показую лоадер\n  // // Функція для показу лоадера це покращений варіант більш гнучкий можно мати де кілька видів лоадерів і змінювати іх змінюючи клас\n  // function showLoader() {\n  //   loader.classList.add('visible'); // Додаємо клас для відображення лоадера\n  //   console.log('Лоадер показано'); // Для перевірки\n  // }\n} catch (error) {\n  console.error('Помилка у showLoader:', error);\n  throw error;\n}\n\n  //перевіряю\n  console.log('Лоадер показано');\n}\n\n/* Функція для приховування лоадера.Вона навпаки приховує елемент с класом loader після завершення запиту.Установлюючі значення none.*/\nfunction hideLoader() {\n  try {\n    if (loader)\n      loader.style.display = 'none'; // Ховаю лоадер\n  }\n  // // Функція для приховування лоадера. це варіант 2.\n  // function hideLoader() {\n  //   loader.classList.remove('visible'); // Забираємо клас, щоб приховати лоадер\n  //   console.log('Лоадер приховано'); // Для перевірки\n  // }\n catch (error) {\n  console.error('Помилка у hideLoader:', error);\n  throw error;\n}\n\n  //перевіряю\n  console.log('Лоадер приховано');\n}\n\n/* Додаю обробник події на відправку форми\nЦей обробник викликається кожного разу, коли користувач натискає кнопку відправлення форми. Його основна мета — виконати пошук зображень, базуючись на введеному тексті.*/\nform.addEventListener('submit', async event => {\n  //Запобігаю перезавантаженню сторінки за замовчуванням при сабміті форми\n  event.preventDefault();\n\n  // перевірка події submit\n  // console.log('Форма відправлена.');\n\n  // Отримую та очищую введений текст\n  const query = input.value.trim(); // Вилучаю зайві пробіли з обох боків введеного тексту\n\n  //перевірка отриманого значення\n  // console.log('Пошуковий запит:', query);\n\n  // Перевіряю, чи поле введення не порожнє\n  if (!query) {\n    // Показую помилку користувачеві через повідомлення\n    iziToast.error({\n      title: 'Помилка',\n      message: 'Будь ласка, введіть пошуковий запит.',\n      position: 'topRight',\n    });\n\n    return; // Завершую виконання функції\n  }\n  //Якщо в якомусь з await буде помилка (проміс відхилино)вона перейде на catch на обробку\n  try {\n    showLoader(); // Відображаю анімацію завантаження\n\n    // Очищую галерею та показуємо лоадер\n    clearGallery(); // Видаляю попередні результати пошуку\n\n    // Використання setTimeout для симуляції затримки\n    await new Promise(resolve => setTimeout(resolve, 3000));\n\n    console.log('Лоадер показано після відправки запиту.');\n\n    // Виконую запит до API та обробляю результати\n    const data = await getImagesByQuery(query);\n\n    console.log('Після виклику getImagesByQuery. Отримано дані:', data); // підтвержую отримання відповіді від API\n\n    // Перевіряю, чи є результати у відповіді\n    if (!data.hits || data.hits.length === 0) {\n      /*Я перевіряю, чи існує масив \"hits\" у відповіді API та чи містить він хоча б один елемент.Якщо масив \"hits\" відсутній або порожній, це означає, що результатів пошуку немає.У цьому випадку я показуємо відповідну інфориацію користувачеві через повідомлнення.Назву масива я отримую з публічного сервіса API Pixabay коли роблю запит*/\n      iziToast.info({\n        title: 'Нічого не знайдено',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      // console.log('Масив hits порожній або не існує.'); // підтвердження відсутності результатів\n\n      return; // Завершую виконання функції\n    }\n\n    // Створюю галерею з отриманих даних\n    createGallery(data.hits); // Використовую отриманий масив зображень для створення галереї\n\n    //Виводжу інформацію  про створення галереї\n    // console.log('Галерея створена. Кількість зображень:', data.hits.length);\n\n    // Відображаю успішне повідомлення\n    iziToast.success({\n      title: 'Успіх',\n      message: `Знайдено ${data.hits.length} зображень.`,\n      position: 'topRight',\n      timeout: 3000,\n    });\n  } catch (error) {\n    //обробляю помилку\n    console.error('Помилка запиту:', error); // Лог у консоль для діагностики\n    // Відображаю повідомлення про помилку\n    iziToast.error({\n      title: 'Помилка',\n      message: 'Не вдалося завантажити зображення. Спробуйте пізніше.',\n      position: 'topRight',\n    });\n  } finally {\n    // Ховаю лоадер та очищую поле вводу\n    hideLoader(); // Приховую анімацію завантаження\n    input.value = ''; // Очищаю текстове поле\n\n    // Лог завершення операції\n    console.log('Лоадер схований, поле введення очищене.');\n  }\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","params","axios","error","galleryContainer","loadMoreButton","lightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","hideLoadMoreButton","form","input","loader","showLoader","hideLoader","event","iziToast","resolve","data"],"mappings":"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"}