import{a as M,S as P,i as l}from"./assets/vendor-CrlV4O_2.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const H="50290691-d51719558e36c91c48babc26d",B="https://pixabay.com/api/";async function x(t,e=1){const n={key:H,q:t,image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:15,page:e};try{return(await M.get(B,{params:n})).data}catch(s){throw s}}const f=document.querySelector(".gallery"),p=document.querySelector(".select");document.querySelector(".loader");let h=null;function E(t){console.log("Виклик createGallery. Масив зображень:",t);try{const e=t.map(({webformatURL:n,largeImageURL:s,tags:o,likes:r,views:a,comments:$,downloads:q})=>(console.log("Обробка зображення:",{webformatURL:n,largeImageURL:s,tags:o}),`
        <li class="gallery-item">
          <a href="${s}" class="gallery-link">
          <img src="${n}" alt="${o}" loading="lazy" />
          </a>
        <div class="info">
        <p><b>Likes:</b> ${r}</p>
        <p><b>Views:</b> ${a}</p>
        <p><b>Comments:</b> ${$}</p>
        <p><b>Downloads:</b> ${q}</p>
      </div>
    </li>`)).join("");f.insertAdjacentHTML("beforeend",e),h?h.refresh():h=new P(".gallery a",{captionsData:"alt",captionDelay:250}),f.children.length>0&&p.classList.remove("is-hidden")}catch(e){throw console.error("Помилка у createGallery:",e),e}}async function m(){try{f.innerHTML="",await d(),console.log("Галерея очищена.")}catch(t){throw console.error("Помилка у функції clearGallery:",t),new Error("Не вдалося очистити галерею.")}}async function O(){try{p.classList.remove("is-hidden")}catch(t){throw console.error("Помилка при показі кнопки Load more:",t),t}}async function d(){try{p.classList.add("is-hidden")}catch(t){throw console.error("Помилка при приховуванні кнопки Load more:",t),t}}const v=document.querySelector(".form"),w=v.querySelector('input[name="search-text"]'),y=document.querySelector(".loader"),G=document.querySelector(".select"),b=document.querySelector(".gallery");let g="",c=1,i=0,u=!1;function R(){y&&(y.style.display="block")}function L(){y&&(y.style.display="none")}function T(t){return new Promise(e=>setTimeout(e,t))}async function S(t=!1){if(!u){u=!0,R(),d();try{await T(1e3);const e=await x(g,c);if(!e.hits||e.hits.length===0){m(),console.clear(),l.info({title:"Нічого не знайдено",message:"Sorry, there are no images matching your search query. Please try again!",position:"topRight"}),d(),L(),u=!1;return}if(t){m(),i=e.totalHits;const s=Math.ceil(i/15);console.clear(),console.log(`Новий запит: "${g}"`),console.log(`Загальна кількість результатів: ${i}, Максимальна кількість сторінок: ${s}`),l.success({title:"Успіх",message:`Знайдено ${i} зображень.`,position:"topRight",timeout:2e3})}if(E(e.hits),t)window.scrollTo({top:0,behavior:"smooth"});else{const s=b.querySelector(".photo-card");if(s){const o=s.getBoundingClientRect().height||200;b.scrollHeight>window.innerHeight&&window.scrollBy({top:o*2,behavior:"smooth"})}}const n=Math.ceil(i/15);console.log(`Поточна сторінка: ${c} / ${n}`),c>=n?(l.info({title:"Кінець колекції",message:"We're sorry, but you've reached the end of search results.",position:"topRight"}),d()):(c+=1,O())}catch(e){console.error("Помилка запиту:",e),l.error({title:"Помилка",message:"Не вдалося завантажити зображення. Спробуйте пізніше.",position:"topRight"})}finally{L(),u=!1}}}v.addEventListener("submit",async t=>{t.preventDefault();const e=w.value.trim();if(!e){l.error({title:"Помилка",message:"Будь ласка, введіть пошуковий запит.",position:"topRight"});return}g=e,c=1,i=0,await S(!0),w.value=""});G.addEventListener("click",async()=>{console.log("Кнопка Load More натиснута"),await S(!1)});
//# sourceMappingURL=index.js.map
