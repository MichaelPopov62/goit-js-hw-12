import{a as S,S as v,i as a}from"./assets/vendor-CrlV4O_2.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();const q="50290691-d51719558e36c91c48babc26d",E="https://pixabay.com/api/",A=15;async function $(r,e=1){console.log("Виклик функції getImagesByQuery із запитом:",r,e);const s={key:q,q:r,image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:A,page:e};try{return(await S.get(E,{params:s})).data}catch(n){throw n}}const m=document.querySelector(".gallery");document.querySelector(".select");document.querySelector(".loader");console.log("Контейнер галереї знайдено:",m);let d=null;function x(r){console.log("Виклик createGallery. Масив зображень:",r);try{const e=r.map(({webformatURL:s,largeImageURL:n,tags:t,likes:o,views:i,comments:L,downloads:P})=>(console.log("Обробка зображення:",{webformatURL:s,largeImageURL:n,tags:t}),`
   <li class="gallery-item">
     <a href="${n}" class="gallery-link">
     <img src="${s}" alt="${t}" loading="lazy" />
     </a>
   <div class="info">
    <p><b>Likes:</b> ${o}</p>
      <p><b>Views:</b> ${i}</p>
      <p><b>Comments:</b> ${L}</p>
      <p><b>Downloads:</b> ${P}</p>
    </div>
  </li>`)).join("");m.insertAdjacentHTML("beforeend",e),d?d.refresh():d=new v(".gallery a",{captionsData:"alt",captionDelay:250})}catch(e){throw console.error("Помилка у createGallery:",e),e}}function f(){try{m.innerHTML="",console.log("Галерея очищена.")}catch(r){throw console.error("Помилка у функції clearGallery:",r),new Error("Не вдалося очистити галерею.")}}const h=document.querySelector(".form"),g=h.querySelector('input[name="search-text"]'),u=document.querySelector(".loader"),p=document.querySelector(".select");let b="",l=1,c=0,y=!1;function G(){u&&(u.style.display="block")}function M(){u&&(u.style.display="none")}async function O(r){return new Promise(e=>setTimeout(e,r))}async function w(r=!1){if(y){console.log("Запит уже виконується, новий запит не запускається.");return}y=!0,G(),p.classList.add("is-hidden");try{await O(2e3);const e=await $(b,l);if(!e||!Array.isArray(e.hits))throw new Error("Невалідна структура відповіді API");if(e.hits.length===0){f(),a.info({title:"Нічого не знайдено",message:"Sorry, there are no images matching your search query. Please try again!",position:"topRight"});return}r&&(f(),c=e.totalHits,a.success({title:"Успіх",message:`Знайдено ${c} зображень.`,position:"topRight"})),x(e.hits);const s=Math.ceil(c/15);l<s?(l+=1,p.classList.remove("is-hidden")):a.info({title:"Кінець колекції",message:"We're sorry, but you've reached the end of search results.",position:"topRight"})}catch(e){console.error("Помилка запиту:",e),a.error({title:"Помилка",message:"Не вдалося завантажити зображення. Спробуйте пізніше.",position:"topRight"})}finally{M(),y=!1}}h.addEventListener("submit",async r=>{r.preventDefault();const e=g.value.trim();if(!e){a.error({title:"Помилка",message:"Будь ласка, введіть пошуковий запит.",position:"topRight"});return}b=e,l=1,c=0,f(),await w(!0),g.value=""});p.addEventListener("click",async()=>{console.log("Кнопка Load More натиснута"),await w(!1)});
//# sourceMappingURL=index.js.map
