import{a as P,S as R,i}from"./assets/vendor-CrlV4O_2.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();const M="50290691-d51719558e36c91c48babc26d",E="https://pixabay.com/api/";async function b(e){const t={key:M,q:e,image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:15,page:1};try{return(await P.get(E,{params:t})).data}catch(o){throw o}}const y=document.querySelector(".gallery"),m=document.querySelector(".select");document.querySelector(".loader");let h=null;function w(e){console.log("Виклик createGallery. Масив зображень:",e);try{const t=e.map(({webformatURL:o,largeImageURL:c,tags:r,likes:s,views:l,comments:$,downloads:B})=>(console.log("Обробка зображення:",{webformatURL:o,largeImageURL:c,tags:r}),`
        <li class="gallery-item">
          <a href="${c}" class="gallery-link">
          <img src="${o}" alt="${r}" loading="lazy" />
          </a>
        <div class="info">
        <p><b>Likes:</b> ${s}</p>
        <p><b>Views:</b> ${l}</p>
        <p><b>Comments:</b> ${$}</p>
        <p><b>Downloads:</b> ${B}</p>
      </div>
    </li>`)).join("");y.insertAdjacentHTML("beforeend",t),h?h.refresh():h=new R(".gallery a",{captionsData:"alt",captionDelay:250}),y.children.length>0&&m.classList.remove("is-hidden")}catch(t){throw console.error("Помилка у createGallery:",t),t}}async function O(){try{y.innerHTML="",await n(),console.log("Галерея очищена.")}catch(e){throw console.error("Помилка у функції clearGallery:",e),new Error("Не вдалося очистити галерею.")}}async function L(){try{m.classList.remove("is-hidden")}catch(e){throw console.error("Помилка при показі кнопки Load more:",e),e}}async function n(){try{m.classList.add("is-hidden")}catch(e){throw console.error("Помилка при приховуванні кнопки Load more:",e),e}}const v=document.querySelector(".form"),g=v.querySelector('input[name="search-text"]'),u=document.querySelector(".loader"),x=document.querySelector(".select");let p="",a=1,f=0;function S(){u&&(u.style.display="block")}function d(){u&&(u.style.display="none")}function q(e){return new Promise(t=>setTimeout(t,e))}v.addEventListener("submit",async e=>{e.preventDefault();const t=g.value.trim();if(!t){i.error({title:"Помилка",message:"Будь ласка, введіть пошуковий запит.",position:"topRight"});return}try{n(),S(),p=t,a=1,O(),await q(2e3);const o=await b(p,a);if(f=o.totalHits,!o.hits||o.hits.length===0){i.info({title:"Нічого не знайдено",message:"Sorry, there are no images matching your search query. Please try again!",position:"topRight"}),d();return}w(o.hits),i.success({title:"Успіх",message:`Знайдено ${o.hits.length} зображень.`,position:"topRight",timeout:3e3}),a*15>=f?(i.info({title:"Кінець результатів",message:"We're sorry, but you've reached the end of search results.",position:"topRight"}),n()):L()}catch(o){console.error("Помилка запиту:",o),i.error({title:"Помилка",message:"Не вдалося завантажити зображення. Спробуйте пізніше.",position:"topRight"})}finally{d(),g.value=""}});x.addEventListener("click",async()=>{try{a+=1,n(),S(),await q(2e3);const e=await b(p,a);if(!e.hits||e.hits.length===0){i.info({title:"Кінець результатів",message:"We're sorry, but you've reached the end of search results.",position:"topRight"}),n(),d();return}w(e.hits);const t=document.querySelector(".gallery .photo-card");if(t){const o=t.getBoundingClientRect().height;window.scrollBy({top:o*2,behavior:"smooth"})}a*15>=f?(n(),i.info({title:"Кінець результатів",message:"We're sorry, but you've reached the end of search results.",position:"topRight"})):L()}catch(e){console.error("Помилка при завантаженні додаткових зображень:",e),i.error({title:"Помилка",message:"Не вдалося завантажити додаткові зображення.",position:"topRight"})}finally{d()}});
//# sourceMappingURL=index.js.map
